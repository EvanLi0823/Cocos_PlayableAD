{"version":3,"sources":["assets/script/UpRewardNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport gameConfig from \"./gameConfig\";\nimport { ResMgr } from \"./utils/ResMgr\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class UpRewardNode extends cc.Component {\n\n    @property(cc.Sprite)\n    sprite: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    moneyIcon: cc.Sprite = null\n\n    @property(cc.Label)\n    moneyLabel: cc.Label = null\n\n    @property(cc.Node)\n    targetNode: cc.Node = null\n\n    @property(cc.Label)\n    title: cc.Label = null;\n\n    @property(cc.Label)\n    cashOutLabel: cc.Label = null;\n    @property(cc.Label)\n\n    btnLbl:cc.Label = null;\n\n    @property(cc.Boolean)\n    showFinishMoney: Boolean = false;\n\n\n    start() {\n        this.changeSprite().then(r => {\n            // console.log(\"changeSpritethen\")\n            this.sprite.spriteFrame = r\n        })\n        // gameConfig.setMoneySp(this.moneyIcon)\n        this.moneyLabel.string = gameConfig.getUnifyCurrency() + '0.00'\n\n        if (this.title) {\n            this.title.string = gameConfig.getWord(\"MyBalance\")\n        }\n        if(this.btnLbl){\n            const {string,fontSize} = gameConfig.getWord(\"withdraw\");\n            this.btnLbl.string = string;\n            this.btnLbl.fontSize = fontSize;\n        }\n        if (this.cashOutLabel) {\n            const {string, fontSize} = gameConfig.getWord('cashOutTop')\n            this.cashOutLabel.string = string;\n            this.cashOutLabel.fontSize = fontSize;\n        }\n        \n        // demo的结算页面\n        if (this.targetNode && this.showFinishMoney) {\n            if (cc.view.getFrameSize().width < cc.view.getFrameSize().height) {\n                this.node.scale = 0.7\n            }\n            let dic: { [key: string]: number } = {};\n            dic['Rp'] = 1000000\n            dic['R$'] = 350\n            dic['₩'] = 88000\n\n            let addUnit = (dic[gameConfig.getUnifyCurrency()] || 66) / 10\n            let oldReward = 0\n\n            cc.tween(this.targetNode)\n                .repeat(9,\n                    cc.tween()\n                        .call(() => {\n                            oldReward = oldReward + addUnit;\n                            this.targetNode.getComponent(cc.Label).string = gameConfig.getUnifyCurrency() + oldReward.toFixed(2);\n                        })\n                        .to(0.06, { scale: 1.12 })\n                        .to(0.04, { scale: 1.0 })\n                ).call(() => {\n                    this.targetNode.getComponent(cc.Label).string = gameConfig.getUnifyCurrency() + (addUnit * 10).toFixed(2)\n                })\n                .start()\n\n\n            if (this.showFinishMoney) {\n                cc.tween(this.node).call(() => {\n                    cc.resources.load(\"prefab/rewardAnim\", cc.Prefab, (err, res) => {\n                        if (res) {\n                            let rewardAnim = cc.instantiate(res as cc.Prefab);\n                            rewardAnim.scale = 2\n                            this.node.parent.getChildByName(\"bg\").addChild(rewardAnim, -1);\n                        }\n                    })\n                }).delay(0.3).call(() => {\n                    cc.resources.load(\"prefab/rewardAnim\", cc.Prefab, (err, res) => {\n                        if (res) {\n                            let rewardAnim = cc.instantiate(res as cc.Prefab);\n                            rewardAnim.setPosition(10, 10)\n                            rewardAnim.scale = 2\n                            this.node.parent.getChildByName(\"bg\").addChild(rewardAnim, -1);\n                        }\n                    })\n                }).delay(0.3).call(() => {\n                    cc.resources.load(\"prefab/rewardAnim\", cc.Prefab, (err, res) => {\n                        if (res) {\n                            let rewardAnim = cc.instantiate(res as cc.Prefab);\n                            rewardAnim.setPosition(0, 10)\n\n                            rewardAnim.scale = 2\n                            this.node.parent.getChildByName(\"bg\").addChild(rewardAnim, -1);\n                        }\n                    })\n                })\n                    .start()\n\n                // setTimeout(() => {\n                //     window.gameEnd && window.gameEnd();\n                // }, 2000);\n            }\n\n            \n        }\n    }\n\n    async changeSprite() {\n        // console.log(\"changeSprite\")\n        let pay1sp = gameConfig.getUnifyGuidePay(0);\n        let sp: any = await ResMgr.loadResourcesAsset(\"img/payimg/\" + pay1sp, cc.SpriteFrame)\n        return sp;\n    }\n\n\n    // update (dt) {}\n}\n"]}