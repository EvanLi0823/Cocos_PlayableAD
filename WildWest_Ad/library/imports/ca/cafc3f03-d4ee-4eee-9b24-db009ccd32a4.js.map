{"version":3,"sources":["assets/script/boomScript.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class boomScript extends cc.Component {\n\n    @property(cc.ParticleSystem)\n    smokeParticle: cc.ParticleSystem = null;\n\n    @property(cc.ParticleSystem)\n    fogParticle: cc.ParticleSystem = null; \n\n    @property(cc.Node)\n    lightNode:cc.Node = null;\n\n    @property(cc.Node)\n    spreadRing: cc.Node = null;\n\n    @property(cc.Node)\n    innerRing: cc.Node = null;\n\n    @property(cc.Node)\n    outerRing: cc.Node = null;\n\n    @property(cc.Node)\n    Halo: cc.Node = null;\n\n    @property(cc.RichText)\n    indexLabel:cc.RichText = null; \n\n    targetRadius:number = null;  \n    index:number = null;\n\n    private rate:number = null;\n\n    time:number = 0;\n\n    protected onDestroy(): void {\n        // console.log(`boomScript onDestroy`); \n    }\n    onLoad() {\n        \n        let rate = 1.0;\n        for (let i = 0; i < this.index; i++) {\n            rate *= 0.9;\n        }\n        this.rate = rate;\n        this.initData(); \n    }\n\n    start() { \n        \n        let scale = this.targetRadius * this.rate / 80.0;\n        this.time = 0.65 * scale; \n        \n        this.spreadRing.scale = 0;\n      \n        this.lightNode.scale = 2.0 * this.rate *this.targetRadius/278 ;\n        cc.tween(this.lightNode)\n        .delay(0.08)\n        .to(0.02 , {scale:4.5 * this.rate *this.targetRadius/278}) \n        .call(()=> { \n            this.smokeParticle.resetSystem();\n        })\n        .parallel(\n            cc.tween().to(this.time * 0.5 ,{scale:3.0 * this.rate *this.targetRadius/278}),  \n            cc.tween().call(()=> {\n                cc.tween(this.spreadRing).to(this.time * 0.5 , {scale:1.0}).to(0.01 , {opacity:0}).start();\n                cc.tween(this.Halo).to(this.time * 0.5 , {opacity:0 }).start();\n            })\n        )\n        .call(()=>{\n            cc.tween(this.innerRing).to(this.time * 0.3 , {scale:0.5, opacity:0}).start()\n            cc.tween(this.outerRing).to(this.time * 0.6 , {scale:2 , opacity:0}).start()\n        })\n        .delay(1.0)\n        .call(()=>{\n            this.node.destroy();\n        })\n        .start() \n\n        cc.tween(this.indexLabel.node) \n        .to(0.1 , {scale:1.5 , opacity:255})\n        .to(0.35 , {scale:0.6})\n        .to(0.35 , {scale:1.3})\n        .by(0.4 , {scale:-1 , opacity:-255 , position:cc.v3(0 , 50 ,0)}) \n        .start()\n       \n        this.fogParticle.resetSystem(); \n\n    }\n\n    initData() { \n        \n//         this.light03.width =  this.targetRadius;\n//         this.light03.height =  this.targetRadius;\n// \n//         this.light04.width = this.targetRadius;\n//         this.light04.height = this.targetRadius; \n\n        this.smokeParticle.startSize = this.targetRadius/2;\n        this.smokeParticle.startSizeVar = this.targetRadius/4;\n\n        this.smokeParticle.endSize = this.targetRadius/6;\n        this.smokeParticle.endSizeVar = this.targetRadius/12;\n\n        this.smokeParticle.startRadius = this.targetRadius/4;\n        this.smokeParticle.startRadiusVar = this.targetRadius/20;\n\n        this.smokeParticle.endRadius = this.targetRadius * 2.5 *this.rate;\n        this.smokeParticle.endRadiusVar = this.targetRadius/100;\n        // this.smokeParticle.life = this.time * 0.5;\n        // this.smokeParticle.lifeVar = this.time * 0.1;\n\n        // this.fogParticle.duration = 0.4 * this.rate;\n        this.fogParticle.startRadius = this.targetRadius *1.8 *this.rate;\n        this.fogParticle.startRadiusVar = 20;\n\n        this.fogParticle.endRadius = this.targetRadius * 3.0 *this.rate + this.targetRadius;\n        this.fogParticle.endRadiusVar = this.targetRadius; \n\n        this.indexLabel.string = `<color=#FFDB00><outline color=#FF8000 width=1>${this.index+1}</outline></color>`\n        this.indexLabel.node.setPosition(cc.v2(this.targetRadius/2  ,this.targetRadius/4));\n\n    }\n\n   \n    // update (dt) {}\n}\n"]}