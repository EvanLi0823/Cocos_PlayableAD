
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/localDataManager.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '10b30Fk0/VLVZB/59yPzTwz', 'localDataManager');
// script/localDataManager.ts

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ISNEWER = "ISNEWER";
var PayGuider = "PayGuider";
var QIUINFO = "QIUINFO";
var TARGETLEVEL = "TARGETLEVEL";
var GUIDESHOW = "GUIDESHOW";
var DMSWICTH = "DMSWICTH";
var MUSICBG = "MUSICBG";
var MUSICEFFECT = "MUSICEFFECT";
var SYNTHETICCOUNT = "SYNTHETICCOUNT";
var PASSCOUNT = "PASSCOUNT";
var SCORECOUNT = "SCORECOUNT";
var MAXSCORECOUNT = "MAXSCORECOUNT";
var localDataManager = /** @class */ (function () {
    function localDataManager() {
    }
    localDataManager.shareManager = function () {
        if (this._Manager == null) {
            this._Manager = new localDataManager();
        }
        return this._Manager;
    };
    localDataManager.prototype.getIsNewer = function () {
        var qInfo = cc.sys.localStorage.getItem(ISNEWER);
        if (qInfo != null) {
            return false;
        }
        return true;
    };
    localDataManager.prototype.setIsNewer = function () {
        cc.sys.localStorage.setItem(ISNEWER, "isNewer");
    };
    localDataManager.prototype.isShowPayGuider = function () {
        var qInfo = cc.sys.localStorage.getItem(ISNEWER);
        if (qInfo != null) {
            return false;
        }
        return true;
    };
    localDataManager.prototype.getIsPayGuider = function () {
        var qInfo = cc.sys.localStorage.getItem(PayGuider);
        console.log("getIsPayGuider", qInfo);
        if (qInfo != null) {
            return false;
        }
        return true;
    };
    localDataManager.prototype.setIsPayGuider = function () {
        cc.sys.localStorage.setItem(PayGuider, "isGuiderPay");
    };
    localDataManager.prototype.getQiuInfo = function () {
        var qInfo = cc.sys.localStorage.getItem(QIUINFO);
        if (qInfo != null) {
            return qInfo;
        }
        return "";
    };
    localDataManager.prototype.setQiuInfo = function (qInfo) {
        // console.log(`setQiuInfo ${qInfo}`);
        if (typeof qInfo == "string" && qInfo.length > 0) {
            cc.sys.localStorage.setItem(QIUINFO, qInfo);
        }
        else {
            cc.sys.localStorage.removeItem(QIUINFO);
        }
    };
    localDataManager.prototype.getMaxScoreCount = function () {
        var mCount = cc.sys.localStorage.getItem(MAXSCORECOUNT);
        if (mCount != null) {
            return Number(mCount);
        }
        return 0;
    };
    localDataManager.prototype.setMaxScoreCount = function (mCount) {
        cc.sys.localStorage.setItem(MAXSCORECOUNT, String(mCount));
    };
    localDataManager.prototype.getScoreCount = function () {
        var sCount = cc.sys.localStorage.getItem(SCORECOUNT);
        if (sCount != null) {
            return Number(sCount);
        }
        return 0;
    };
    localDataManager.prototype.setScoreCount = function (sCount) {
        cc.sys.localStorage.setItem(SCORECOUNT, String(sCount));
    };
    localDataManager.prototype.getPassCount = function () {
        var pCount = cc.sys.localStorage.getItem(PASSCOUNT);
        if (pCount != null) {
            return Number(pCount);
        }
        return 0;
    };
    localDataManager.prototype.setPassCount = function (pCount) {
        cc.sys.localStorage.setItem(PASSCOUNT, String(pCount));
    };
    localDataManager.prototype.getSyntheticCount = function () {
        var sCount = cc.sys.localStorage.getItem(SYNTHETICCOUNT);
        if (sCount != null) {
            return Number(sCount);
        }
        return 0;
    };
    localDataManager.prototype.setSyntheticCount = function (sCount) {
        cc.sys.localStorage.setItem(SYNTHETICCOUNT, String(sCount));
    };
    localDataManager.prototype.musicBgSwitch = function () {
        var mb = cc.sys.localStorage.getItem(MUSICBG);
        if (mb == null) {
            return true;
        }
        return false;
    };
    localDataManager.prototype.setMusicBg = function (mb) {
        if (mb) {
            cc.sys.localStorage.removeItem(MUSICBG);
        }
        else {
            cc.sys.localStorage.setItem(MUSICBG, String(mb));
        }
    };
    localDataManager.prototype.dmSwitch = function () {
        var dm = cc.sys.localStorage.getItem(DMSWICTH);
        if (dm == null) {
            return true;
        }
        return false;
    };
    localDataManager.prototype.setDMSwicth = function (dm) {
        if (dm) {
            cc.sys.localStorage.removeItem(DMSWICTH);
        }
        else {
            cc.sys.localStorage.setItem(DMSWICTH, String(dm));
        }
    };
    localDataManager.prototype.guideShow = function () {
        var gs = cc.sys.localStorage.getItem(GUIDESHOW);
        if (gs == null) {
            return false;
        }
        return true;
    };
    localDataManager.prototype.setGuideShow = function () {
        cc.sys.localStorage.setItem(GUIDESHOW, "1");
    };
    localDataManager.prototype.getTargetLevel = function () {
        var targetLevel = cc.sys.localStorage.getItem(TARGETLEVEL);
        if (targetLevel != null) {
            return Number(targetLevel);
        }
        return 4;
    };
    localDataManager.prototype.setTargetLevel = function (tLvel) {
        cc.sys.localStorage.setItem(TARGETLEVEL, String(tLvel));
    };
    localDataManager.prototype.musicEfficSwitch = function () {
        var me = cc.sys.localStorage.getItem(MUSICEFFECT);
        if (me == null) {
            return true;
        }
        return false;
    };
    localDataManager.prototype.setMusicEffect = function (me) {
        if (me) {
            cc.sys.localStorage.removeItem(MUSICEFFECT);
        }
        else {
            cc.sys.localStorage.setItem(MUSICEFFECT, String(me));
        }
    };
    localDataManager._Manager = null;
    return localDataManager;
}());
exports.default = localDataManager;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvbG9jYWxEYXRhTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQTtBQUN6QixJQUFNLFNBQVMsR0FBRyxXQUFXLENBQUE7QUFFN0IsSUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFBO0FBRXpCLElBQU0sV0FBVyxHQUFHLGFBQWEsQ0FBQTtBQUNqQyxJQUFNLFNBQVMsR0FBRyxXQUFXLENBQUE7QUFDN0IsSUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFBO0FBQzNCLElBQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQTtBQUN6QixJQUFNLFdBQVcsR0FBRyxhQUFhLENBQUE7QUFFakMsSUFBTSxjQUFjLEdBQUcsZ0JBQWdCLENBQUE7QUFFdkMsSUFBTSxTQUFTLEdBQUcsV0FBVyxDQUFBO0FBQzdCLElBQU0sVUFBVSxHQUFHLFlBQVksQ0FBQTtBQUUvQixJQUFNLGFBQWEsR0FBRyxlQUFlLENBQUE7QUFFckM7SUFXSTtJQUVBLENBQUM7SUFUYSw2QkFBWSxHQUExQjtRQUNJLElBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLEVBQUU7WUFDdEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLGdCQUFnQixFQUFFLENBQUM7U0FDMUM7UUFDRCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDekIsQ0FBQztJQUtELHFDQUFVLEdBQVY7UUFDSSxJQUFJLEtBQUssR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDakQsSUFBSSxLQUFLLElBQUksSUFBSSxFQUFFO1lBQ2YsT0FBTyxLQUFLLENBQUM7U0FDaEI7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQscUNBQVUsR0FBVjtRQUNJLEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsU0FB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LENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsMkNBQWdCLEdBQWhCO1FBQ0ksSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ2xELElBQUksRUFBRSxJQUFJLElBQUksRUFBRTtZQUNaLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFDRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBRUQseUNBQWMsR0FBZCxVQUFlLEVBQVU7UUFDckIsSUFBRyxFQUFFLEVBQUU7WUFDSCxFQUFFLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDL0M7YUFBSTtZQUNELEVBQUUsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDeEQ7SUFDTCxDQUFDO0lBdExjLHlCQUFRLEdBQUcsSUFBSSxDQUFDO0lBdUxuQyx1QkFBQztDQXpMRCxBQXlMQyxJQUFBO2tCQXpMb0IsZ0JBQWdCIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgSVNORVdFUiA9IFwiSVNORVdFUlwiXG5jb25zdCBQYXlHdWlkZXIgPSBcIlBheUd1aWRlclwiXG5cbmNvbnN0IFFJVUlORk8gPSBcIlFJVUlORk9cIlxuXG5jb25zdCBUQVJHRVRMRVZFTCA9IFwiVEFSR0VUTEVWRUxcIlxuY29uc3QgR1VJREVTSE9XID0gXCJHVUlERVNIT1dcIlxuY29uc3QgRE1TV0lDVEggPSBcIkRNU1dJQ1RIXCJcbmNvbnN0IE1VU0lDQkcgPSBcIk1VU0lDQkdcIlxuY29uc3QgTVVTSUNFRkZFQ1QgPSBcIk1VU0lDRUZGRUNUXCJcblxuY29uc3QgU1lOVEhFVElDQ09VTlQgPSBcIlNZTlRIRVRJQ0NPVU5UXCJcbiBcbmNvbnN0IFBBU1NDT1VOVCA9IFwiUEFTU0NPVU5UXCJcbmNvbnN0IFNDT1JFQ09VTlQgPSBcIlNDT1JFQ09VTlRcIlxuXG5jb25zdCBNQVhTQ09SRUNPVU5UID0gXCJNQVhTQ09SRUNPVU5UXCJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgbG9jYWxEYXRhTWFuYWdlciAge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgX01hbmFnZXIgPSBudWxsO1xuXG4gICAgcHVibGljIHN0YXRpYyBzaGFyZU1hbmFnZXIoKTpsb2NhbERhdGFNYW5hZ2VyIHtcbiAgICAgICAgaWYodGhpcy5fTWFuYWdlciA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLl9NYW5hZ2VyID0gbmV3IGxvY2FsRGF0YU1hbmFnZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fTWFuYWdlcjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgfVxuICAgIGdldElzTmV3ZXIoKTpib29sZWFuIHtcbiAgICAgICAgbGV0IHFJbmZvID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKElTTkVXRVIpO1xuICAgICAgICBpZiAocUluZm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHNldElzTmV3ZXIoKSB7XG4gICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShJU05FV0VSLCBcImlzTmV3ZXJcIik7XG4gICAgfVxuXG4gICAgaXNTaG93UGF5R3VpZGVyKCk6Ym9vbGVhbiB7XG4gICAgICAgIGxldCBxSW5mbyA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShJU05FV0VSKTtcbiAgICAgICAgaWYgKHFJbmZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRJc1BheUd1aWRlcigpIHtcbiAgICAgICAgbGV0IHFJbmZvID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFBheUd1aWRlcik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ2V0SXNQYXlHdWlkZXJcIixxSW5mbylcbiAgICAgICAgaWYgKHFJbmZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzZXRJc1BheUd1aWRlcigpIHtcbiAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFBheUd1aWRlciwgXCJpc0d1aWRlclBheVwiKTtcbiAgICB9XG5cbiAgICBnZXRRaXVJbmZvKCk6c3RyaW5nIHtcbiAgICAgICAgbGV0IHFJbmZvID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFFJVUlORk8pO1xuICAgICAgICBpZiAocUluZm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHFJbmZvO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgYDtcbiAgICB9XG5cbiAgICBzZXRRaXVJbmZvKHFJbmZvOnN0cmluZykge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhgc2V0UWl1SW5mbyAke3FJbmZvfWApO1xuICAgICAgICBcbiAgICAgICAgaWYodHlwZW9mIHFJbmZvID09IFwic3RyaW5nXCIgJiYgcUluZm8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFFJVUlORk8sIHFJbmZvKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFFJVUlORk8pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TWF4U2NvcmVDb3VudCgpOm51bWJlciB7XG4gICAgICAgIGxldCBtQ291bnQgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oTUFYU0NPUkVDT1VOVCk7XG4gICAgICAgIGlmIChtQ291bnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIE51bWJlcihtQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHNldE1heFNjb3JlQ291bnQobUNvdW50Om51bWJlcikge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oTUFYU0NPUkVDT1VOVCwgU3RyaW5nKG1Db3VudCkpO1xuICAgIH1cblxuICAgIGdldFNjb3JlQ291bnQoKTpudW1iZXIge1xuICAgICAgICBsZXQgc0NvdW50ID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFNDT1JFQ09VTlQpO1xuICAgICAgICBpZiAoc0NvdW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIoc0NvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBzZXRTY29yZUNvdW50KHNDb3VudDpudW1iZXIpIHtcbiAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKFNDT1JFQ09VTlQsIFN0cmluZyhzQ291bnQpKTtcbiAgICB9IFxuXG4gICAgZ2V0UGFzc0NvdW50KCk6bnVtYmVyIHtcbiAgICAgICAgbGV0IHBDb3VudCA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShQQVNTQ09VTlQpO1xuICAgICAgICBpZiAocENvdW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIocENvdW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBzZXRQYXNzQ291bnQocENvdW50Om51bWJlcikge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oUEFTU0NPVU5ULCBTdHJpbmcocENvdW50KSk7XG4gICAgfVxuXG4gICAgZ2V0U3ludGhldGljQ291bnQoKTpudW1iZXIge1xuICAgICAgICBsZXQgc0NvdW50ID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKFNZTlRIRVRJQ0NPVU5UKTtcbiAgICAgICAgaWYgKHNDb3VudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyKHNDb3VudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgc2V0U3ludGhldGljQ291bnQoc0NvdW50Om51bWJlcikge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oU1lOVEhFVElDQ09VTlQsIFN0cmluZyhzQ291bnQpKTtcbiAgICB9XG5cbiAgICBtdXNpY0JnU3dpdGNoKCkge1xuICAgICAgICBsZXQgbWIgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oTVVTSUNCRyk7XG4gICAgICAgIGlmIChtYiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0TXVzaWNCZyhtYjpib29sZWFuKSB7XG4gICAgICAgIGlmKG1iKSB7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTVVTSUNCRyk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKE1VU0lDQkcsIFN0cmluZyhtYikpO1xuICAgICAgICB9IFxuICAgIH1cblxuICAgIGRtU3dpdGNoKCl7XG4gICAgICAgIGxldCBkbSA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShETVNXSUNUSCk7XG4gICAgICAgIGlmIChkbSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0RE1Td2ljdGgoZG06Ym9vbGVhbikge1xuICAgICAgICBpZihkbSkge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKERNU1dJQ1RIKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oRE1TV0lDVEgsIFN0cmluZyhkbSkpO1xuICAgICAgICB9IFxuICAgIH1cblxuICAgIGd1aWRlU2hvdygpe1xuICAgICAgICBsZXQgZ3MgPSBjYy5zeXMubG9jYWxTdG9yYWdlLmdldEl0ZW0oR1VJREVTSE9XKTtcbiAgICAgICAgaWYgKGdzID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzZXRHdWlkZVNob3coKSB7XG4gICAgICAgIGNjLnN5cy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShHVUlERVNIT1csIFwiMVwiKTtcbiAgICB9XG5cbiAgICBnZXRUYXJnZXRMZXZlbCgpOm51bWJlciB7XG4gICAgICAgIGxldCB0YXJnZXRMZXZlbCA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShUQVJHRVRMRVZFTCk7XG4gICAgICAgIGlmKHRhcmdldExldmVsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIodGFyZ2V0TGV2ZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiA0O1xuICAgIH1cblxuICAgIHNldFRhcmdldExldmVsKHRMdmVsOm51bWJlcikge1xuICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oVEFSR0VUTEVWRUwsIFN0cmluZyh0THZlbCkpO1xuICAgIH1cblxuICAgIG11c2ljRWZmaWNTd2l0Y2goKSB7XG4gICAgICAgIGxldCBtZSA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShNVVNJQ0VGRkVDVCk7XG4gICAgICAgIGlmIChtZSA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgc2V0TXVzaWNFZmZlY3QobWU6Ym9vbGVhbikge1xuICAgICAgICBpZihtZSkge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKE1VU0lDRUZGRUNUKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0oTVVTSUNFRkZFQ1QsIFN0cmluZyhtZSkpO1xuICAgICAgICB9ICBcbiAgICB9XG59XG4iXX0=