{"version":3,"sources":["assets/script/PlatformInteraction/JsbSdkScript.ts"],"names":[],"mappings":";;;;;;AAIA,IAAM,eAAe,GAAG,WAAW,CAAC;AAEpC,8EAA8E;AAC9E,8DAA8D;AAC9D,IAAM,YAAY,GAAG,+BAA+B,CAAA;AAEpD;IAkBI;QAfA,uBAAkB,GAAuB,IAAI,CAAC;QAC9C,kBAAa,GAAqB,IAAI,CAAC;QAEvC,aAAQ,GAAG,IAAI,CAAC;QAaZ,IAAI,CAAC,QAAQ,GAAG;YAEZ,4BAA4B,YAAC,MAAM;gBAC/B,IAAI,YAAY,CAAC,QAAQ,CAAC,kBAAkB,IAAI,IAAI;uBAC7C,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,4BAA4B,IAAI,IAAI,EAAE;oBAClF,qDAAqD;oBAErD,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC;iBACjF;YACL,CAAC;YAED,iBAAiB,YAAC,MAAM;gBACpB,IAAI,YAAY,CAAC,QAAQ,CAAC,kBAAkB,IAAI,IAAI;uBAC7C,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,iBAAiB,IAAI,IAAI,EAAE;oBAEvE,sDAAsD;oBACtD,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;iBACtE;YACL,CAAC;YAED,iBAAiB;gBACb,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,IAAI,IAAI,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,sBAAsB,IAAI,IAAI,IAAI,SAAS,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,sBAAsB,EAAE;oBAC9L,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,sBAAsB,EAAE,CAAC;iBAChE;YACL,CAAC;YAED,iBAAiB;gBACb,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,IAAI,IAAI,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,iBAAiB,IAAI,IAAI,IAAI,SAAS,IAAI,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,iBAAiB,EAAE;oBACpL,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,iBAAiB,EAAE,CAAC;iBAC3D;YACL,CAAC;YAED,4BAA4B,YAAC,MAAM;gBAE/B,IAAI,YAAY,CAAC,QAAQ,CAAC,kBAAkB,IAAI,IAAI;uBAC7C,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,4BAA4B,IAAI,IAAI,EAAE;oBAElF,sDAAsD;oBACtD,YAAY,CAAC,QAAQ,CAAC,kBAAkB,CAAC,4BAA4B,CAAC,MAAM,CAAC,CAAC;iBACjF;YACL,CAAC;SACJ,CAAA;IACL,CAAC;IAnDD,sBAAkB,wBAAQ;aAA1B;YACI,IAAG,YAAY,CAAC,SAAS,IAAI,IAAI,EAAC;gBAC9B,YAAY,CAAC,SAAS,GAAG,IAAI,YAAY,EAAE,CAAC;aAC/C;YAED,OAAO,YAAY,CAAC,SAAS,CAAC;QAClC,CAAC;;;OAAA;IA+CM,2BAAc,GAArB;QACI,qCAAqC;QACrC,yCAAyC;QACzC,8EAA8E;QAC9E,IAAI;IACR,CAAC;IAEM,8BAAiB,GAAxB;QACI,kBAAkB;QAClB,0CAA0C;QAC1C,8FAA8F;QAC9F,IAAI;QACJ,0CAA0C;QAC1C,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,0BAAa,GAApB;QACI,qCAAqC;QACrC,iFAAiF;QACjF,IAAI;QACJ,yCAAyC;QACzC,qGAAqG;QACrG,IAAI;QACJ,SAAS;QACL,OAAO;YACH,QAAQ,EAAE,SAAS;YACnB,iBAAiB,EAAE,CAAC;SACvB,CAAA;QACL,IAAI;IACR,CAAC;IAEM,2BAAc,GAArB;QACI,qCAAqC;QACrC,4FAA4F;QAC5F,0BAA0B;QAC1B,IAAI;QACJ,0CAA0C;QAC1C,iHAAiH;QACjH,kEAAkE;QAClE,8BAA8B;QAC9B,UAAU;QACV,IAAI;QACJ,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,8BAAiB,GAAxB;QACI,qCAAqC;QACrC,4FAA4F;QAC5F,0BAA0B;QAC1B,IAAI;QACJ,0CAA0C;QAC1C,mGAAmG;QACnG,kEAAkE;QAClE,8BAA8B;QAC9B,UAAU;QACV,IAAI;QACJ,OAAO,EAAE,CAAC;IACd,CAAC;IAEM,iCAAoB,GAA3B;QACI,qCAAqC;QACrC,iFAAiF;QACjF,IAAI;QACJ,2CAA2C;QAC3C,oFAAoF;QACpF,IAAI;QACJ,QAAQ;QACR,yBAAyB;QACzB,wBAAwB;QACxB,8BAA8B;QAC9B,+BAA+B;QAC/B,YAAY;QACZ,iDAAiD;QACjD,kFAAkF;QAClF,eAAe;QACf,IAAI;IACR,CAAC;IACD,wBAAwB;IACjB,sBAAS,GAAhB,UAAiB,IAAW;QACxB,qCAAqC;QACrC,yFAAyF;QACzF,IAAI;QACJ,+CAA+C;QAC/C,gFAAgF;QAChF,IAAI;QACJ,QAAQ;QACR,yBAAyB;QACzB,8CAA8C;QAC9C,8BAA8B;QAC9B,YAAY;QAEZ,iDAAiD;QACjD,uEAAuE;QACvE,eAAe;QACf,IAAI;IACR,CAAC;IAEM,yBAAY,GAAnB;QACI,qCAAqC;QACrC,yEAAyE;QACzE,IAAI;QACJ,0CAA0C;QAC1C,4EAA4E;QAC5E,IAAI;IACR,CAAC;IAEM,sBAAS,GAAhB,UAAiB,SAAkB,EAAC,QAAiB;QACrD,4CAA4C;QAC5C,oIAAoI;QACpI,QAAQ;IACR,CAAC;IAEA,cAAc;IACP,gCAAmB,GAA1B;QACG,oDAAoD;QACpD,yCAAyC;QACzC,WAAW;QACX,iHAAiH;QACjH,qCAAqC;QACrC,cAAc;QACd,+BAA+B;QAC/B,sEAAsE;QACtE,QAAQ;QACR,IAAI;QACJ,6DAA6D;QAC7D,iBAAiB;IACpB,CAAC;IAEF,oCAAoC;IAChC,mBAAmB;IACnB,yCAAyC;IACzC,wFAAwF;IACxF,IAAI;IACJ,yCAAyC;IAC7C,KAAK;IAEG,uBAAU,GAAjB;QACG,yCAAyC;QACzC,oFAAoF;QACpF,KAAK;IACR,CAAC;IAEF,kCAAkC;IAC9B,yCAAyC;IACzC,kFAAkF;IAClF,KAAK;IACT,KAAK;IAEE,2BAAc,GAArB,UAAsB,KAAK;QACvB,qCAAqC;QACrC,sFAAsF;QACtF,IAAI;QACJ,8CAA8C;QAC9C,2GAA2G;QAC3G,IAAI;IACR,CAAC;IAEM,0BAAa,GAApB;QACA,6CAA6C;QAC7C,gFAAgF;QAChF,OAAO;IACR,CAAC;IAEM,uBAAU,GAAjB;QACC,4CAA4C;QAC5C,6EAA6E;QAC7E,OAAO;IACR,CAAC;IA7Ne,sBAAS,GAAgB,IAAI,CAAA;IA8NhD,mBAAC;CAvOD,AAuOC,IAAA;kBAvOoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import gameConfig from \"../gameConfig\";\nimport {ReceviceRPResultModel, SingleRPConfigModel} from \"../Model/DataModel\";\nimport {gameSceneDelegate, PassRewardDelegate} from \"./PIDelegate\";\n\nconst OC_RV_JSC_CLASS = \"OCCBridge\";\n\n// const ANDROID_PATH = \"com.taoni.android.answer.ui.activity.MainActivity\"   \n// const ANDROID_PATH = \"org/cocos2dx/javascript/AppActivity\" \nconst ANDROID_PATH = \"com.android.game.MainActivity\"\n\nexport default class JsbSdkScript  {\n\n\n    passRewardlistener: PassRewardDelegate = null;\n    sceneListener:gameSceneDelegate = null;\n\n    delegate = null;\n    \n\n    private static _instance:JsbSdkScript = null\n    public static get Instance():JsbSdkScript  {\n        if(JsbSdkScript._instance == null){\n            JsbSdkScript._instance = new JsbSdkScript();\n        }\n\n        return JsbSdkScript._instance;\n    }  \n\n    private constructor(){\n        this.delegate = {\n\n            getEveryRewardAmountCallBack(reward) {\n                if (JsbSdkScript.Instance.passRewardlistener != null\n                    && JsbSdkScript.Instance.passRewardlistener.getEveryRewardAmountCallBack != null) {\n                    // console.log(`reportPassRewardCallBack ${reward}`);\n\n                    JsbSdkScript.Instance.passRewardlistener.getEveryRewardAmountCallBack(reward);\n                }\n            },\n\n            showVideoCallBack(reward) {\n                if (JsbSdkScript.Instance.passRewardlistener != null\n                    && JsbSdkScript.Instance.passRewardlistener.showVideoCallBack != null) {\n\n                    // console.log(`receivePassRewardCallBack ${reward}`);\n                    JsbSdkScript.Instance.passRewardlistener.showVideoCallBack(reward);\n                }\n            },\n\n            gameSceneDisapear(){\n                if (JsbSdkScript.Instance.sceneListener != null && JsbSdkScript.Instance.sceneListener.gameSceneWillDisappear != null && undefined != JsbSdkScript.Instance.sceneListener.gameSceneWillDisappear) {  \n                    JsbSdkScript.Instance.sceneListener.gameSceneWillDisappear();\n                }\n            },\n          \n            gameSceneOnResume(){\n                if (JsbSdkScript.Instance.sceneListener != null && JsbSdkScript.Instance.sceneListener.gameSceneOnResume != null && undefined != JsbSdkScript.Instance.sceneListener.gameSceneOnResume) {  \n                    JsbSdkScript.Instance.sceneListener.gameSceneOnResume();\n                }\n            },\n\n            getMergeRewardAmountCallBack(reward) {\n               \n                if (JsbSdkScript.Instance.passRewardlistener != null\n                    && JsbSdkScript.Instance.passRewardlistener.getMergeRewardAmountCallBack != null) {\n\n                    // console.log(`receivePassRewardCallBack ${reward}`);\n                    JsbSdkScript.Instance.passRewardlistener.getMergeRewardAmountCallBack(reward);\n                }\n            },\n        }\n    }\n\n    static getMergeReward(){\n        // if (gameConfig.isWhiteBag) return;\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     jsb.reflection.callStaticMethod(ANDROID_PATH, \"getMergeReward\", \"()V\");\n        // }\n    }\n\n    static requestIsWhiteBao():boolean {\n        // let isWhiteBao;\n        // if (cc.sys.os === cc.sys.OS_ANDROID) { \n        //     isWhiteBao = jsb.reflection.callStaticMethod(ANDROID_PATH, \"requestIsWhiteBao\", \"()Z\");\n        // }\n        // return isWhiteBao? isWhiteBao : false;;\n        return false;\n    }\n\n    static getCommonParm() {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     return jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"getCommonParm:\");\n        // }\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     return jsb.reflection.callStaticMethod(ANDROID_PATH, \"getCommonParm\", \"()Ljava/lang/String;\");\n        // }\n        // else {\n            return {\n                language: 'English',\n                numberOfIntervals: 6\n            }\n        // }\n    }\n     \n    static getTotalReward():string {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     let totalReward = jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"getTotalReward\");\n        //     return totalReward;\n        // }\n        //  if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     let totalReward = jsb.reflection.callStaticMethod(ANDROID_PATH, \"getTotalReward\", \"()Ljava/lang/String;\");\n        //     if(totalReward != null && typeof totalReward == \"string\") {\n        //         return totalReward;\n        //     }  \n        // }\n        return \"10\";\n    }\n\n    static getMaxValueReward():number {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     let totalReward = jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"getTotalReward\");\n        //     return totalReward;\n        // }\n        //  if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     let totalReward = jsb.reflection.callStaticMethod(ANDROID_PATH, \"getmaxValueReward\", \"()I\");\n        //     if(totalReward != null && typeof totalReward == \"number\") {\n        //         return totalReward;\n        //     }  \n        // }\n        return 10;\n    }\n\n    static getEveryRewardAmount() {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"getEveryRewardAmount:\");\n        // }\n        //  if (cc.sys.os === cc.sys.OS_ANDROID) { \n        //     jsb.reflection.callStaticMethod(ANDROID_PATH, \"getEveryRewardAmount\", \"()V\");\n        // }\n        // else{\n        //     setTimeout(() => {\n        //         let model = {\n        //             reward:\"10.00\",\n        //             isnewplayer : 1,\n        //         }\n        //         let modelJson = JSON.stringify(model);\n        //         JsbSdkScript.Instance.delegate.getEveryRewardAmountCallBack(modelJson);\n        //     }, 0.2);\n        // }\n    }\n    /**0视频广告 1插屏广告 2宝箱视频广告*/\n    static showVideo(type:number) {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"showVideo:andIsHC:\", `${type}`);\n        // }\n        // else if (cc.sys.os === cc.sys.OS_ANDROID) { \n        //     jsb.reflection.callStaticMethod(ANDROID_PATH, \"showVideo\", \"(I)V\", type);\n        // }\n        // else{\n        //     setTimeout(() => {\n        //         let model:ReceviceRPResultModel = {\n        //             amount: \"1.00\",\n        //         }\n    \n        //         let modelJson = JSON.stringify(model);\n        //         JsbSdkScript.Instance.delegate.showVideoCallBack(modelJson);\n        //     }, 0.2);\n        // }\n    }\n\n    static showWithdraw() {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"showWithdraw:\");\n        // }\n        //  if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     jsb.reflection.callStaticMethod(ANDROID_PATH, \"showWithdraw\", \"()V\");\n        // }\n    }\n\n    static buryPoint(eventname : string,jsondata : string) {\n    //    if (cc.sys.os === cc.sys.OS_ANDROID) {\n    //         jsb.reflection.callStaticMethod(ANDROID_PATH, \"buryPoint\", \"(Ljava/lang/String;Ljava/lang/String;)V\",eventname,jsondata);\n    //     }\n    }\n\n     /**获取宝箱打开条件 */\n     static getBaoXiaoCondition() {\n        // let jsonstr = {isload: 1, freezetime: Date.now()}\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     try{\n        //         let ret = jsb.reflection.callStaticMethod(ANDROID_PATH, \"getBaoXiaoCondition\", \"()Ljava/lang/String;\")\n        //         jsonstr = JSON.parse(ret);\n        //     }catch{\n        //         console.warn(\"数据异常\")\n        //         jsonstr = {isload:0, freezetime: Date.now()+12332131231312}\n        //     }\n        // }\n        // console.log(\"getBaoXiaoCondition\",JSON.stringify(jsonstr))\n        // return jsonstr\n     }\n\n    //  static getUserLevel() : number {\n        // let getUserLevel\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     getUserLevel = jsb.reflection.callStaticMethod(ANDROID_PATH, \"getMyLevel\", \"()I\")\n        // }\n        // return getUserLevel ? getUserLevel : 4\n    //  }\n\n     static showBubble(){\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     return jsb.reflection.callStaticMethod(ANDROID_PATH, \"onBubbleClick\", \"()V\");\n        //  }\n     }\n     \n    // static isNewPlayer() : number {\n        // if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     return jsb.reflection.callStaticMethod(ANDROID_PATH, \"isNewPlayer\", \"()I\");\n        //  }\n    //  }\n\n    static playMergeAudio(index) {\n        // if (cc.sys.os === cc.sys.OS_IOS) {\n        //     jsb.reflection.callStaticMethod(OC_RV_JSC_CLASS, \"playMergeAudio:\",`${index}`);\n        // }\n        // else if (cc.sys.os === cc.sys.OS_ANDROID) {\n        //     jsb.reflection.callStaticMethod(ANDROID_PATH, \"playMergeAudio\", \"(Ljava/lang/String;)V\",`${index}`);\n        // }\n    }\n\n    static PrivacyPolicy() {\n    //     if (cc.sys.os === cc.sys.OS_ANDROID) {\n    //        jsb.reflection.callStaticMethod(ANDROID_PATH, \"PrivacyPolicy\", \"()V\");\n    //    }\n   }\n\n   static TermsofUse() {\n    //    if (cc.sys.os === cc.sys.OS_ANDROID) {\n    //        jsb.reflection.callStaticMethod(ANDROID_PATH, \"TermsofUse\", \"()V\");\n    //    }\n   }\n}\n"]}