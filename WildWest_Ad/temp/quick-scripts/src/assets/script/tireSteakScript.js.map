{"version":3,"sources":["assets/script/tireSteakScript.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import levelBarScript from \"./levelBarScript\";\nimport gameConfig from \"./gameConfig\";\nimport TargetqiuScript from \"./TargetScript/TargetqiuScript\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class tireSteakScript extends cc.Component {\n\n    @property(cc.Node)\n    tireSteakNode: cc.Node = null;\n\n    @property(cc.Node)\n    particleNode: cc.Node = null;\n\n    @property(cc.Node)\n    spriteNode: cc.Node = null;\n\n    targetNode: cc.Node = null;\n\n    leftNode:cc.Node = null\n\n    score:number = 0;\n\n    redbag:cc.Node = null\n\n\n    onDestroy() {\n        \n    }\n    onLoad() {\n        this.targetNode = cc.find(\"Canvas/gameNode/gameLayer/UpRewardNode/bg3/moneyID/label\");\n        cc.resources.load(\"prefab/redbagPrefab\", cc.Prefab, (err, res) => {\n            if (res){\n                this.redbag = cc.instantiate(res as unknown as cc.Prefab);\n                this.node.addChild(this.redbag);\n                this.redbag.opacity = 0\n            }\n        })\n    }\n\n    start() {\n\n    }\n\n    action() {\n        let targetNode\n        targetNode = this.targetNode\n        let tartgetPos = targetNode.convertToWorldSpaceAR(cc.v2(0, 0));\n        let pos1 = this.node.convertToNodeSpaceAR(tartgetPos);\n        let pos = cc.v2(pos1.x + targetNode.width / 2, pos1.y);\n        let MotionStreakComponent = this.tireSteakNode.getComponent(cc.MotionStreak);\n        this.spriteNode.opacity = 255;\n        MotionStreakComponent.stroke = 34;\n        cc.tween(this.node)\n            .parallel(\n                cc.tween()\n                    .call(() => {\n                        this.redbag.opacity = 255\n                        \n                    })\n                    .delay(0.65)\n                    .call(() => {\n                        // let particleNode = cc.instantiate(this.particleNode);\n                        // particleNode.getComponent(cc.ParticleSystem).playOnLoad = true;\n                        // particleNode.getComponent(cc.ParticleSystem).autoRemoveOnFinish = true;\n                        // this.node.addChild(particleNode);\n                    }),\n                cc.tween().bezierBy(1.0, cc.v2(pos.x / 4, 500), cc.v2(pos.x * 3 / 4, 500), pos)\n                    .call(() => {\n                        cc.tween(this.spriteNode).to(0.5, { opacity: 0 }).start();\n                            this.redbag.opacity = 0\n\n                        // let particleNode = cc.instantiate(this.particleNode);\n                        // particleNode.getComponent(cc.ParticleSystem).playOnLoad = true;\n                        // particleNode.getComponent(cc.ParticleSystem).autoRemoveOnFinish = true;\n                        // this.node.addChild(particleNode);\n\n                            let dic: { [key: string]: number } = {};\n                            dic['Rp'] = 1000000\n                            dic['R$'] = 350\n                            dic['â‚©'] = 88000\n\n                            let addUnit = (dic[gameConfig.getUnifyCurrency()] || 66) / 10\n                            let oldReward = 0\n\n\n                            cc.tween(targetNode)\n                                .repeat(9,\n                                    cc.tween()\n                                        .call(() => {\n                                            oldReward = oldReward + addUnit;\n                                            targetNode.getComponent(cc.Label).string = gameConfig.getUnifyCurrency() + oldReward.toFixed(2);\n                                        })\n                                        .to(0.06, {scale: 1.12})\n                                        .to(0.04, {scale: 1.0})\n                                ).call(() => {\n                                targetNode.getComponent(cc.Label).string = gameConfig.getUnifyCurrency() + (addUnit*10).toFixed(2)})\n                                .start()\n                    })\n                    .delay(1.0)\n                    .call(() => {\n                        cc.resources.load(`prefab/BigWinNode`, cc.Prefab, (err, res) => {\n                            let prefab = cc.instantiate(res as cc.Prefab);\n                            cc.find(\"Canvas/gameNode\").addChild(prefab)\n                        })\n                        this.node.destroy();\n\n                        // window.gameEnd&&window.gameEnd();\n                    })\n            )\n            .start();\n    }\n}\n"]}